<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>Coach hub â€” pick a module | M Share</title>
    <meta name="description" content="Pick a coach module and start a guided session. Modules you added appear here." />
    <link rel="preload" href="style.css" as="style" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="assets/css/footer-2025.css" />
    <link rel="stylesheet" href="assets/css/header-2025.css" />
    <link rel="stylesheet" href="assets/css/nav-footer-uni.css" />
    <link rel="stylesheet" href="assets/css/responsive-fixes.css" />
</head>

<body>
<!--#include file="partials/global-header.html" -->

    

    <main class="container" role="main">
        <section class="card">
            <h1>Coach hub</h1>
            <p class="muted">Pick a module and start a guided session. Add more modules from their pages.</p>
            <div id="moduleList" class="grid cols-3" style="gap:12px"></div>
            <div class="row-actions" style="margin-top:10px">
                <a class="btn" data-href="autism.html">Add Autism module</a>
            </div>
        </section>
    </main>

    <!-- Reuse existing runner modal styles and script from autism.html by loading the same scripts -->
    <script src="app.js"></script>
    <script src="coach.js"></script>
    <script src="voice-coach-fix.js" defer></script>
    <script>
        (function () {
            var COACH_KEY = 'mshare_coach_modules_v1';
            function loadModules() { try { return JSON.parse(localStorage.getItem(COACH_KEY) || '{}') || {}; } catch { return {}; } }
            function card(mod) {
                var el = document.createElement('div');
                el.className = 'card';
                el.innerHTML = '<h3 style="margin-top:0">' + (mod.name || mod.id) + '</h3>' +
                    '<div class="muted">Flows: ' + ((mod.flows || []).length) + '</div>' +
                    '<div class="actions" style="margin-top:8px">' +
                    '<button class="btn btn-success" data-act="open" data-id="' + mod.id + '">Open coach</button>' +
                    '</div>';
                return el;
            }
            function render() {
                var mods = loadModules();
                var host = document.getElementById('moduleList');
                host.innerHTML = '';
                var list = Object.values(mods);
                if (!list.length) { host.innerHTML = '<div class="muted">No modules yet. Add from a module page.</div>'; return; }
                list.forEach(function (m) { host.appendChild(card(m)); });
            }
            document.addEventListener('click', function (e) {
                var b = e.target.closest('button[data-act="open"]'); if (!b) return;
                e.preventDefault();
                // Use the runner present on autism.html: open there with query param
                var id = b.getAttribute('data-id');
                location.href = 'autism.html#open-coach';
            });
            render();
        })();
    </script>
    
    <script defer src="assets/js/nav-global.js"></script>

<!--#include file="partials/global-footer.html" -->
</body>

</html>
