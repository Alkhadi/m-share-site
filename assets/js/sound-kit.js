(()=>{"use strict";let AC=null;function ensureAC(){if(!AC)AC=new(AudioContext||webkitAudioContext);if(AC.state==="suspended")AC.resume()}["click","touchstart","keydown"].forEach(evt=>{window.addEventListener(evt,()=>{try{ensureAC()}catch{}},{once:true,passive:true})});function tone({freq=440,dur=.12,type:"sine",vol=.18}={}){if(!AC)return;const o=AC.createOscillator(),g=AC.createGain();o.type=type;o.frequency.value=freq;g.gain.value=0;o.connect(g),g.connect(AC.destination);const t=AC.currentTime;g.gain.setValueAtTime(0,t),g.gain.linearRampToValueAtTime(vol,t+.01),g.gain.exponentialRampToValueAtTime(.0001,t+dur),o.start(t),o.stop(t+dur+.02)}function clickSound(){tone({freq:520,dur:.09,type:"sine",vol:.16})}function startSound(){tone({freq:660,dur:.16,type:"triangle",vol:.22})}function stopSound(){tone({freq:360,dur:.18,type:"square",vol:.2})}document.addEventListener("click",e=>{const btn=e.target.closest(".btn,a,button");if(!btn)return;try{ensureAC(),clickSound()}catch{}},{passive:true});function bindStartStop(startSel,stopSel){const s=document.querySelector(startSel),p=document.querySelector(stopSel);s&&s.addEventListener("click",()=>{try{ensureAC(),startSound()}catch{}},{passive:true}),p&&p.addEventListener("click",()=>{try{ensureAC(),stopSound()}catch{}},{passive:true})}bindStartStop("#pbStart","#pbStop");bindStartStop("#nbStart","#nbStop");bindStartStop("#stStart","#stStop");document.addEventListener("keydown",e=>{if(e.code==="Space"){try{ensureAC(),clickSound()}catch{}}});})();
