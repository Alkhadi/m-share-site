(()=>{if(window.__SND__)return;window.__SND__=true;let AC=null;function ensureAC(){if(!AC){AC=new (window.AudioContext||window.webkitAudioContext)();}if(AC.state==='suspended'){AC.resume();}}function tone(o){if(!AC)return;const g=AC.createGain();g.gain.value=0;const osc=AC.createOscillator();osc.type=o.type||'sine';osc.frequency.value=o.freq||520;osc.connect(g);g.connect(AC.destination);const now=AC.currentTime;const dur=o.dur||.12;const vol=o.vol||.18;g.gain.setValueAtTime(0,now);g.gain.linearRampToValueAtTime(vol,now+.01);g.gain.exponentialRampToValueAtTime(.0001,now+dur);osc.start(now);osc.stop(now+dur+.02);}function clickSound(){tone({freq:520,dur:.09,type:'sine',vol:.16});}function startSound(){tone({freq:660,dur:.16,type:'triangle',vol:.22});}function stopSound(){tone({freq:360,dur:.18,type:'square',vol:.2});}
document.addEventListener('click',e=>{const btn=e.target.closest('.btn,a,button');if(!btn)return;try{ensureAC();clickSound();}catch{}},{passive:true});
function bindStartStop(selStart,selStop){const s=document.querySelector(selStart),p=document.querySelector(selStop);if(s)s.addEventListener('click',()=>{try{ensureAC();startSound();}catch{}},{passive:true});if(p)p.addEventListener('click',()=>{try{ensureAC();stopSound();}catch{}},{passive:true});}
window.SoundKit={ensureAC,clickSound,startSound,stopSound,bindStartStop};
document.addEventListener('keydown',e=>{if(e.code==='Space'){try{ensureAC();clickSound();}catch{}}});})();
